const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BookShelf-DcjxXcd1.js","./vendor-BteJJEos.js","./vendor-CXe1BRiH.css","./loading-D7HzTnul.js","./loading-DkQYEuap.css","./BookShelf-00b2QCsd.css","./BookChapter-Bdv_ubFm.js","./BookChapter-DZj8sYQu.css"])))=>i.map(i=>d[i]);
import{r as We,c as C,o as g,a as le,b as ae,d as W,i as He,e as V,f as J,g as x,F as O,h,j as f,E as Ke,u as i,l as N,w as p,k as y,t as Z,m as Ce,n as Me,p as Fe,q as ce,s as Ue,v as k,x as Se,y as me,z as qe,A as Be,B as ze,C as xe,D as ue,G as Ee,H as te,I as Le,J as M,K as Ge,L as Ye,M as fe,N as Qe,V as Xe,O as de,P as I,Q as Ze,R as et,S as H,T as Re,U as Ie,W as tt,X as ot,Y as nt,Z as z,_ as rt,$ as st,a0 as it,a1 as lt,a2 as at,a3 as ct,a4 as ut,a5 as dt}from"./vendor-BteJJEos.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const A=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},pt={};function gt(e,t){const n=We("router-view");return g(),C(n)}const Te=A(pt,[["render",gt]]),ht="modulepreload",St=function(e,t){return new URL(e,t).href},ye={},be=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){const l=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),_=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(w=>{if(w=St(w,r),w in ye)return;ye[w]=!0;const U=w.endsWith(".css"),E=U?'[rel="stylesheet"]':"";if(!!r)for(let b=l.length-1;b>=0;b--){const v=l[b];if(v.href===w&&(!U||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${E}`))return;const c=document.createElement("link");if(c.rel=U?"stylesheet":ht,U||(c.as="script"),c.crossOrigin="",c.href=w,_&&c.setAttribute("nonce",_),document.head.appendChild(c),U)return new Promise((b,v)=>{c.addEventListener("load",b),c.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${w}`)))})}))}function o(l){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=l,window.dispatchEvent(a),!a.defaultPrevented)throw l}return s.then(l=>{for(const a of l||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},Ve=[{path:"/",name:"shelf",component:()=>be(()=>import("./BookShelf-DcjxXcd1.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)},{path:"/chapter",name:"chapter",component:()=>be(()=>import("./BookChapter-Bdv_ubFm.js"),__vite__mapDeps([6,1,2,3,4,7]),import.meta.url)}];le({history:ae(),routes:Ve});const mt={style:{"margin-top":"20px"}},ft=W({__name:"SourceHelp",setup(e){const t=He("isBookSource",V(!0)),n=J(()=>t.value?"书源":"订阅源"),r=J(()=>t.value?"ruleHelp":"rssRuleHelp");return(s,o)=>{const l=Ke,a=Ce;return g(),x(O,null,[h(l,{icon:i(N),href:"/help/#appHelp",target:"_blank"},{default:p(()=>[...o[0]||(o[0]=[y("APP帮助文档",-1)])]),_:1},8,["icon"]),o[18]||(o[18]=f("br",null,null,-1)),h(l,{icon:i(N),href:`/help/#${i(r)}`,target:"_blank"},{default:p(()=>[y(Z(i(n))+"制作教程",1)]),_:1},8,["icon","href"]),o[19]||(o[19]=f("br",null,null,-1)),h(l,{icon:i(N),href:"/help/#jsHelp",target:"_blank"},{default:p(()=>[...o[1]||(o[1]=[y("js变量和函数",-1)])]),_:1},8,["icon"]),o[20]||(o[20]=f("br",null,null,-1)),h(l,{icon:i(N),href:"/help/#xpathHelp",target:"_blank"},{default:p(()=>[...o[2]||(o[2]=[y("xpath语法教程",-1)])]),_:1},8,["icon"]),o[21]||(o[21]=f("br",null,null,-1)),h(l,{icon:i(N),href:"/help/#regexHelp",target:"_blank"},{default:p(()=>[...o[3]||(o[3]=[y("正则表达式教程",-1)])]),_:1},8,["icon"]),o[22]||(o[22]=f("br",null,null,-1)),h(l,{icon:i(N),href:"/help/#txtTocRuleHelp",target:"_blank"},{default:p(()=>[...o[4]||(o[4]=[y("txt目录正则说明",-1)])]),_:1},8,["icon"]),o[23]||(o[23]=f("br",null,null,-1)),h(l,{icon:i(N),href:"/help/#debugHelp",target:"_blank"},{default:p(()=>[...o[5]||(o[5]=[y("书源调试说明",-1)])]),_:1},8,["icon"]),o[24]||(o[24]=f("br",null,null,-1)),h(l,{icon:i(N),href:"/help/#httpTTSHelp",target:"_blank"},{default:p(()=>[...o[6]||(o[6]=[y("在线朗读规则",-1)])]),_:1},8,["icon"]),o[25]||(o[25]=f("br",null,null,-1)),h(l,{icon:i(N),href:"/help/#webDavBookHelp",target:"_blank"},{default:p(()=>[...o[7]||(o[7]=[y(" WebDav书籍简明使用教程",-1)])]),_:1},8,["icon"]),o[26]||(o[26]=f("br",null,null,-1)),h(l,{icon:i(N),href:"/help/#webDavHelp",target:"_blank"},{default:p(()=>[...o[8]||(o[8]=[y(" WebDav备份教程",-1)])]),_:1},8,["icon"]),o[27]||(o[27]=f("br",null,null,-1)),h(l,{icon:i(N),href:"https://regexr-cn.com/",target:"_blank"},{default:p(()=>[...o[9]||(o[9]=[y("正则表达式在线验证工具",-1)])]),_:1},8,["icon"]),o[28]||(o[28]=f("br",null,null,-1)),f("div",mt,[f("span",null,[h(a,null,{default:p(()=>[...o[10]||(o[10]=[f("code",null,"^$()[]{}.?+*|",-1),y(" 这些是Java正则特殊符号,匹配需转义",-1)])]),_:1})]),o[14]||(o[14]=f("br",null,null,-1)),f("span",null,[h(a,null,{default:p(()=>[...o[11]||(o[11]=[f("code",null,"(?s)",-1),y(" 前缀表示跨行解析",-1)])]),_:1})]),o[15]||(o[15]=f("br",null,null,-1)),f("span",null,[h(a,null,{default:p(()=>[...o[12]||(o[12]=[f("code",null,"(?m)",-1),y(" 前缀表示逐行匹配",-1)])]),_:1})]),o[16]||(o[16]=f("br",null,null,-1)),f("span",null,[h(a,null,{default:p(()=>[...o[13]||(o[13]=[f("code",null,"(?i)",-1),y(" 前缀表示忽略大小写",-1)])]),_:1})]),o[17]||(o[17]=f("br",null,null,-1))])],64)}}}),yt=A(ft,[["__scopeId","data-v-2e79b7a9"]]),bt="remoteUrl",_t=1e3,B=Me.create({baseURL:localStorage.getItem(bt)||location.origin,timeout:120*_t});let $="",pe="",ge=()=>{},K=()=>{};const kt=e=>K=e,vt=e=>{ge=e},wt=(e,t)=>{$=new URL(e).toString(),pe=new URL(t).toString(),B.defaults.baseURL=$},Ct=async(e=$)=>{const{data:t}=await B.get("getReadConfig",{baseURL:e.toString(),timeout:3e3});if(t.isSuccess)try{return JSON.parse(t.data)}catch{}},Ut=e=>B.post("saveReadConfig",e),Bt=e=>B.post("saveBookProgress",e),xt=e=>{e&&navigator.sendBeacon(new URL("saveBookProgress",$),JSON.stringify(e))},Et=()=>B.get("getBookshelf"),Lt=e=>B.get("getChapterList?url="+encodeURIComponent(e)),Rt=(e,t)=>B.get("getBookContent?url="+encodeURIComponent(e)+"&index="+t),It=(e,t,n)=>{const r=new WebSocket(new URL("searchBook",pe));r.onerror=ge,r.onopen=()=>{r.send(`{"key":"${e}"}`)},r.onmessage=s=>{try{t(JSON.parse(s.data)),K==null||K.call(r,s)}catch{n()}},r.onclose=()=>{n()}},Tt=e=>B.post("saveBook",e),Vt=e=>B.post("deleteBook",e),ee=/bookSource/i.test(location.href),Nt=()=>ee?B.get("getBookSources"):B.get("getRssSources"),Ot=e=>ee?B.post("saveBookSource",e):B.post("saveRssSource",e),Jt=e=>ee?B.post("saveBookSources",e):B.post("saveRssSources",e),Dt=e=>ee?B.post("deleteBookSources",e):B.post("deleteRssSources",e),jt=(e,t,n,r)=>{const s=new URL(`${ee?"bookSource":"rssSource"}Debug`,pe),o=new WebSocket(s);o.onerror=ge,o.onopen=()=>{o.send(JSON.stringify({tag:e,key:t}))},o.onmessage=l=>{n(l.data),K==null||K.call(o,l)},o.onclose=()=>{r()}},Pt=e=>e.startsWith($)?e:new URL("cover?path="+encodeURIComponent(e),$).toString(),$t=(e,t,n)=>t.startsWith($)?t:new URL("image?path="+encodeURIComponent(t)+"&url="+encodeURIComponent(e)+"&width="+n,$).toString(),P={getReadConfig:Ct,saveReadConfig:Ut,saveBookProgress:Bt,saveBookProgressWithBeacon:xt,getBookShelf:Et,getChapterList:Lt,getBookContent:Rt,search:It,saveBook:Tt,deleteBook:Vt,getSources:Nt,saveSources:Jt,saveSource:Ot,deleteSource:Dt,debug:jt,getProxyCoverUrl:Pt,getProxyImageUrl:$t},X=e=>e==null||e.length===0||/^\s+$/.test(e),xo=e=>/,\s*\{/.test(e)||!(e.startsWith("http")||e.startsWith("data:")||e.startsWith("blob:")),At=(e,t=["https:","http:"])=>{try{const n=new URL(e),{protocol:r}=n;if(!t.includes(r))throw new Error(`Expected protocol ${t.join("/")}, but ${r}`);return!0}catch{return!1}},Eo=e=>{const t=new Date().getTime(),n=Math.floor((t-e)/1e3);let r="";return n<=30?r="刚刚":n<60?r=n+"秒前":n<3600?r=Math.floor(n/60)+"分钟前":n<86400?r=Math.floor(n/3600)+"小时前":n<2592e3?r=Math.floor(n/86400)+"天前":r=Fe(new Date(e),"YYYY-MM-DD"),r},Wt={theme:0,font:0,fontSize:18,readWidth:800,infiniteLoading:!1,customFontName:"",jumpDuration:1e3,spacing:{paragraph:1,line:.8,letter:0}};let _e;const Ht=ce("book",{state:()=>({searchBooks:[],shelf:[],catalog:[],readingBook:{chapterPos:0,chapterIndex:0},popCataVisible:!1,contentLoading:!0,showContent:!1,config:Wt,miniInterface:!1,readSettingsVisible:!1}),getters:{bookProgress:e=>{var l;if(e.catalog.length==0)return;const{chapterIndex:t,chapterPos:n,name:r,author:s}=e.readingBook,o=(l=e.catalog[t])==null?void 0:l.title;if(o)return{name:r,author:s,durChapterIndex:t,durChapterPos:n,durChapterTime:new Date().getTime(),durChapterTitle:o}},theme:e=>e.config.theme,isNight:e=>e.config.theme==6},actions:{async loadBookShelf(){const e=P.getBookShelf().then(t=>{const{isSuccess:n,data:r,errorMsg:s}=t.data;if(n===!0)this.shelf.length!==r.length&&this.shelf.length>0&&r.length>0&&k.info("书架数据已更新"),this.shelf=r.sort((o,l)=>{const a=o.durChapterTime||0;return(l.durChapterTime||0)-a});else{if(s.includes("还没有添加小说")&&this.shelf.length>0)return k.info("当前书架上的书籍已经被删除"),this.shelf=[];k.error(s??"后端返回格式错误！")}return this.shelf});return this.shelf.length>0?this.shelf:await e},async loadWebCatalog(e){const{bookUrl:t,name:n,chapterIndex:r}=e,s=P.getChapterList(t).then(o=>{const{isSuccess:l,data:a,errorMsg:_}=o.data;if(l===!1)throw k.error(_),new Error;return t===this.readingBook.bookUrl&&a.length!==this.catalog.length&&a.length>0&&this.catalog.length>0&&k.info(`书籍${n}: 章节目录已更新`),this.catalog=a,this.catalog});return t===this.readingBook.bookUrl&&this.catalog.length>0&&this.catalog.length-1>=r?this.catalog:await s},setPopCataVisible(e){this.popCataVisible=e},setContentLoading(e){this.contentLoading=e},setReadingBook(e){this.readingBook=e},async loadWebConfig(){if(_e===void 0){const e=await P.getReadConfig();return _e=new Date,this.setConfig(e)}},setConfig(e){this.config=Object.assign({},this.config,e)},setReadSettingsVisible(e){this.readSettingsVisible=e},setShowContent(e){this.showContent=e},setMiniInterface(e){this.miniInterface=e},async setSearchBooks(e){e.forEach(t=>{this.shelf.every(r=>r.bookUrl!==t.bookUrl)===!0&&this.searchBooks.push(t)})},clearSearchBooks(){this.searchBooks=[]},async saveBookProgress(){if(!this.bookProgress)return Promise.resolve();const{bookUrl:e}=this.readingBook,t=Ue(this.shelf),n=t.findIndex(r=>r.bookUrl===e);return n>-1&&(this.shelf[n]=Object.assign({},t[n],this.bookProgress)),P.saveBookProgressWithBeacon(this.bookProgress)}}}),oe=e=>"bookSourceName"in e,Kt=e=>oe(e)?!X(e.bookSourceName)&&!X(e.bookSourceUrl)&&!X(e.bookSourceType):!X(e.sourceName)&&!X(e.sourceUrl),ne=e=>oe(e)?e.bookSourceUrl:e.sourceUrl,he=e=>oe(e)?e.bookSourceName:e.sourceName,Mt=(e,t)=>{var n,r,s,o;return oe(e)?(e.bookSourceName.includes(t)||e.bookSourceUrl.includes(t)||((n=e.bookSourceGroup)==null?void 0:n.includes(t))||((r=e.bookSourceComment)==null?void 0:r.includes(t)))??!1:(e.sourceName.includes(t)||e.sourceUrl.includes(t)||((s=e.sourceGroup)==null?void 0:s.includes(t))||((o=e.sourceComment)==null?void 0:o.includes(t)))??!1},ie=e=>{const t=new Map;return e.forEach(n=>t.set(ne(n),n)),t},Ne=e=>{for(const t in e){const n=e[t];n===""||n===null||typeof n=="string"&&!n.trim()?delete e[t]:n instanceof Object&&Ne(n)}},Ft={ruleSearch:{},ruleBookInfo:{},ruleToc:{},ruleContent:{},ruleExplore:{}},qt={},G=/bookSource/i.test(location.href),ke=G?Ft:qt,F=ce("source",{state:()=>({bookSources:me([]),rssSources:me([]),savedSources:[],currentSource:JSON.parse(JSON.stringify(ke)),currentTab:localStorage.getItem("tabName")||"editTab",editTabSource:{},isDebuging:!1}),getters:{sources:e=>G?e.bookSources:e.rssSources,sourcesMap:function(){return ie(this.sources)},savedSourcesMap:e=>ie(e.savedSources),currentSourceUrl:e=>G?e.currentSource.bookSourceUrl:e.currentSource.sourceUrl,searchKey:e=>{var t,n;return G?((n=(t=e.currentSource)==null?void 0:t.ruleSearch)==null?void 0:n.checkKeyWord)||"我的":""}},actions:{startDebug(){this.currentTab="editDebug",this.isDebuging=!0},debugFinish(){this.isDebuging=!1},saveSources(e){G?this.bookSources=Se(e):this.rssSources=Se(e)},setPushReturnSources(e){this.savedSources=e},deleteSources(e){const t=G?this.bookSources:this.rssSources;e.forEach(n=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)})},saveCurrentSource(){const e=this.currentSource,t=this.sourcesMap;t.set(ne(e),JSON.parse(JSON.stringify(e))),this.saveSources(Array.from(t.values()))},changeCurrentSource(e){this.currentSource=JSON.parse(JSON.stringify(e))},changeTabName(e){this.currentTab=e,localStorage.setItem("tabName",e)},changeEditTabSource(e){this.editTabSource=JSON.parse(JSON.stringify(e))},editHistory(e){let t;if(localStorage.getItem("history"))t=JSON.parse(localStorage.getItem("history")),t.new.push(e),t.new.length>50&&t.new.shift(),t.old.length>50&&t.old.shift(),localStorage.setItem("history",JSON.stringify(t));else{const n={new:[e],old:[]};localStorage.setItem("history",JSON.stringify(n))}},editHistoryUndo(){if(localStorage.getItem("history")){const e=JSON.parse(localStorage.getItem("history"));e.old.push(this.currentSource),e.new.length&&(this.currentSource=e.new.pop()),localStorage.setItem("history",JSON.stringify(e))}},clearAllHistory(){localStorage.setItem("history",JSON.stringify({new:[],old:[]}))},clearEdit(){this.editTabSource={},this.currentSource=JSON.parse(JSON.stringify(ke))},clearAllSource(){this.bookSources=[],this.rssSources=[],this.savedSources=[]}}}),zt=ce("connection",{state:()=>({connectStatus:"正在连接后端服务器……",connectType:"primary",newConnect:!1}),actions:{setConnectStatus(e){this.newConnect!==!0&&(this.connectStatus=e)},setConnectType(e){this.newConnect!==!0&&(this.connectType=e)},setNewConnect(e){this.newConnect=e}}}),Oe=qe();Be(Te).use(Oe);const Y=zt(),ve=Array.of("isSuccess","errorMsg"),Je=k,Gt=e=>{let t=!0;try{const n=e.data;for(const r of ve)r in n||(t=!1,ve.length=0);n.isSuccess===!0&&("data"in n||(t=!1))}catch{t=!1}if(t===!1)throw Je.warning({message:"后端返回内容格式错误",grouping:!0}),new Error;return Y.setConnectType("primary"),Y.setConnectStatus("已连接 "+$),e},De=e=>{throw Je.error({message:"后端连接失败，请检查阅读WEB服务或者设置其它可用链接",grouping:!0}),Y.setConnectType("danger"),Y.setConnectStatus("连接异常"),e};B.interceptors.response.use(Gt,De);vt(De);kt(()=>{Y.setConnectType("primary"),Y.setConnectStatus("已连接 "+$)});const Yt=e=>{let t=new URL(location.origin);At(e)&&(t=new URL(e));const{protocol:n,port:r}=t;let s;r!==""?s=String(Number(r)+1):s=n.startsWith("https:")?"444":"81";const o=n.startsWith("https:")?"wss://":"ws://",l=t.toString();t.protocol=o,t.port=s;const a=t.toString();return[l,a]};wt(...Yt(B.defaults.baseURL));const Qt=W({__name:"SourceItem",props:{source:{}},setup(e){const t=e,n=F(),r=J(()=>n.currentSourceUrl),s=J(()=>ne(t.source)),o=a=>{n.changeCurrentSource(a)},l=J(()=>{const a=n.savedSourcesMap;return a.size==0?!1:!a.has(s.value)});return(a,_)=>{const w=ue,U=ze;return g(),C(U,{size:"large",border:"",value:i(s),class:xe({error:i(l),edit:i(s)==i(r)})},{default:p(()=>[y(Z(i(he)(e.source))+" ",1),h(w,{text:"",icon:i(Ee),onClick:_[0]||(_[0]=E=>o(e.source))},null,8,["icon"])]),_:1},8,["value","class"])}}}),Xt=A(Qt,[["__scopeId","data-v-d8dae8d3"]]),Zt={class:"tool"},eo=W({__name:"SourceList",setup(e){const t=F(),n=V([]),r=V(""),s=J(()=>t.sources),o=J(()=>{const d=r.value;return d===""?s.value:s.value.filter(c=>Mt(c,d))}),l=J(()=>{const d=n.value;if(d.length==0)return[];const c=r.value==""?t.sourcesMap:ie(o.value);return d.reduce((b,v)=>{const L=c.get(v);return L&&b.push(L),b},[])}),a=()=>{const d=l.value;P.deleteSource(d).then(({data:c})=>{if(!c.isSuccess)return k.error(c.errorMsg);t.deleteSources(d);const b=Ue(n.value);d.forEach(v=>{const L=b.indexOf(ne(v));L>-1&&b.splice(L,1)}),n.value=b})},_=()=>{t.clearAllSource(),n.value=[]},w=()=>{const d=document.createElement("input");d.type="file",d.accept=".json,.txt",d.addEventListener("change",()=>{const c=d.files;if(c===null)return k.info("未选择文件");const b=new FileReader;b.readAsText(c[0]),b.onload=()=>{try{const v=JSON.parse(b.result);t.saveSources(v)}catch(v){k.error("上传的源格式错误: "+v.message)}}}),d.click()},U=/bookSource/i.test(window.location.href),E=()=>{const d=document.createElement("a"),c=n.value.length===0?o.value:l.value,b=U?"BookSource":"RssSource";d.download=`${b}_${Date().replace(/.*?\s(\d+)\s(\d+)\s(\d+:\d+:\d+).*/,"$2$1$3").replace(/:/g,"")}.json`;const v=new Blob([JSON.stringify(c,null,4)],{type:"application/json"});d.href=window.URL.createObjectURL(v),d.click(),window.URL.revokeObjectURL(d.href)};return(d,c)=>{const b=te,v=ue,L=Qe;return g(),x(O,null,[h(b,{modelValue:i(r),"onUpdate:modelValue":c[0]||(c[0]=D=>M(r)?r.value=D:null),class:"search","prefix-icon":i(Le),placeholder:"筛选源"},null,8,["modelValue","prefix-icon"]),f("div",Zt,[h(v,{onClick:w,icon:i(Ge)},{default:p(()=>[...c[2]||(c[2]=[y("打开",-1)])]),_:1},8,["icon"]),h(v,{disabled:i(o).length===0,onClick:E,icon:i(Ye)},{default:p(()=>[...c[3]||(c[3]=[y(" 导出",-1)])]),_:1},8,["disabled","icon"]),h(v,{type:"danger",icon:i(fe),onClick:a,disabled:i(l).length===0},{default:p(()=>[...c[4]||(c[4]=[y("删除",-1)])]),_:1},8,["icon","disabled"]),h(v,{type:"danger",icon:i(fe),onClick:_,disabled:i(s).length===0},{default:p(()=>[...c[5]||(c[5]=[y("清空",-1)])]),_:1},8,["icon","disabled"])]),h(L,{id:"source-list",modelValue:i(n),"onUpdate:modelValue":c[1]||(c[1]=D=>M(n)?n.value=D:null)},{default:p(()=>[h(i(Xe),{style:{height:"100%","overflow-y":"auto","overflow-x":"hidden"},"data-key":D=>i(he)(D),"data-sources":i(o),"data-component":Xt,"estimate-size":45},null,8,["data-key","data-sources"])]),_:1},8,["modelValue"])],64)}}}),to=A(eo,[["__scopeId","data-v-258cd99b"]]),oo=W({__name:"SourceDebug",setup(e){const t=F(),n=V(""),r=V("");de(()=>t.isDebuging,()=>{t.isDebuging&&o()});const s=a=>{const _=document.querySelector("#debug-text");_.scrollTop=_.scrollHeight,n.value+=a+`
`},o=async()=>{n.value="";try{await P.saveSource(t.currentSource)}catch(a){throw t.debugFinish(),a}P.debug(t.currentSourceUrl,r.value||t.searchKey,s,t.debugFinish)},l=J(()=>/bookSource/i.test(window.location.href));return(a,_)=>{const w=te;return g(),x(O,null,[i(l)?(g(),C(w,{key:0,id:"debug-key",modelValue:i(r),"onUpdate:modelValue":_[0]||(_[0]=U=>M(r)?r.value=U:null),placeholder:"搜索书名、作者","prefix-icon":i(Le),style:{"padding-bottom":"4px"},onKeydown:Ze(o,["enter"])},null,8,["modelValue","prefix-icon"])):I("",!0),h(w,{id:"debug-text",modelValue:i(n),"onUpdate:modelValue":_[1]||(_[1]=U=>M(n)?n.value=U:null),type:"textarea",readonly:"",rows:29,placeholder:"这里用于输出调试信息"},null,8,["modelValue"])],64)}}}),no=A(oo,[["__scopeId","data-v-3ac68c8a"]]),ro=W({__name:"SourceJson",setup(e){const t=F(),n=V(""),r=async s=>{try{t.changeEditTabSource(JSON.parse(s))}catch{k({message:"粘贴的源格式错误",type:"error"})}};return et(async()=>{const s=t.editTabSource;Object.keys(s).length>0?n.value=JSON.stringify(s,null,4):n.value=""}),(s,o)=>{const l=te;return g(),C(l,{id:"source-json",modelValue:i(n),"onUpdate:modelValue":o[0]||(o[0]=a=>M(n)?n.value=a:null),type:"textarea",placeholder:"这里输出序列化的JSON数据,可直接导入'阅读'APP",rows:30,onChange:r,style:{"margin-bottom":"4px"}},null,8,["modelValue"])}}}),so=A(ro,[["__scopeId","data-v-f62d9369"]]),io=W({__name:"SourceTabTools",setup(e){const t=F(),n=J({get:()=>t.currentTab,set:s=>t.currentTab=s}),r=V([["editTab","编辑源"],["editDebug","调试源"],["editList","源列表"],["editHelp","帮助信息"]]);return(s,o)=>{const l=so,a=no,_=to,w=yt,U=Re,E=Ie;return g(),C(E,{modelValue:i(n),"onUpdate:modelValue":o[0]||(o[0]=d=>M(n)?n.value=d:null)},{default:p(()=>[(g(!0),x(O,null,H(i(r),(d,c)=>(g(),C(U,{key:d[0],name:d[0],label:d[1]},{default:p(()=>[c==0?(g(),C(l,{key:0})):I("",!0),c==1?(g(),C(a,{key:1})):I("",!0),c==2?(g(),C(_,{key:2})):I("",!0),c==3?(g(),C(w,{key:3})):I("",!0)]),_:2},1032,["name","label"]))),128))]),_:1},8,["modelValue"])}}}),lo=A(io,[["__scopeId","data-v-fd81540f"]]),ao={class:"menu flex-column-center"},co={class:"hotkeys-header flex-space-between"},uo=["id"],po={key:0},go={class:"hotkeys-settings flex-column-center"},ho={class:"title"},So={class:"hotkeys-item__content"},mo={key:0},fo={key:0},yo=W({__name:"ToolBar",setup(e){const t=F(),n=()=>{const m=k({message:"加载中……",showClose:!0,duration:0});P.getSources().then(({data:u})=>{u.isSuccess?(t.changeTabName("editList"),t.saveSources(u.data),k({message:`成功拉取${u.data.length}条源`,type:"success"})):k({message:u.errorMsg??"后端错误",type:"error"})}).finally(()=>m.close())},r=()=>{const m=t.sources;if(t.changeTabName("editList"),m.length===0)return k({message:"空空如也",type:"info"});k({message:"正在推送中",type:"info"}),P.saveSources(m).then(({data:u})=>{if(u.isSuccess){const S=u.data;if(Array.isArray(S)){let j="";m.length>S.length&&(j=`
推送失败的源将用红色字体标注!`,t.setPushReturnSources(S)),k({message:`批量推送源到「阅读3.0APP」
共计: ${m.length} 条
成功: ${S.length} 条
失败: ${m.length-S.length} 条${j}`,type:"success"})}}else k({message:`批量推送源失败!
ErrorMsg: ${u.errorMsg}`,type:"error"})})},s=()=>{t.changeTabName("editTab"),t.changeEditTabSource(t.currentSource)},o=()=>{t.changeCurrentSource(t.editTabSource)},l=()=>{t.editHistoryUndo()},a=()=>{t.clearEdit(),k({message:"已清除",type:"success"})},_=()=>{t.clearEdit(),t.clearAllHistory(),k({message:"已清除所有历史记录",type:"success"})},w=()=>{const m=t.currentSource;Kt(m)?(Ne(m),P.saveSource(m).then(({data:u})=>{const S=he(m);u.isSuccess?(k({message:`源《${S}》已成功保存到「阅读3.0APP」`,type:"success"}),t.saveCurrentSource()):k({message:`源《${S}》保存失败!
ErrorMsg: ${u.errorMsg}`,type:"error"})})):k({message:"请检查<必填>项是否全部填写",type:"error"})},U=()=>{t.startDebug()},E=V(Array.of({name:"⇈推送源",hotKeys:[],action:r},{name:"⇊拉取源",hotKeys:[],action:n},{name:"⋙生成源",hotKeys:[],action:s},{name:"⋘编辑源",hotKeys:[],action:o},{name:"✗清空表单",hotKeys:[],action:a},{name:"↶撤销操作",hotKeys:[],action:l},{name:"↷重做操作",hotKeys:[],action:_},{name:"⇏调试源",hotKeys:[],action:U},{name:"✓保存源",hotKeys:[],action:w})),d=V(!0),c=V(!1),b=V(-1),v=()=>{c.value||(d.value=!1),c.value=!1};de(d,m=>{if(!m){z.unbind("*"),Q(),q();return}Q(),z.unbind(),z("*",u=>{u.preventDefault();const S=z.getPressedKeyString();S.length==1&&S[0]=="esc"||c.value&&b.value>-1&&(E.value[b.value].hotKeys=S)})},{immediate:!0});const L=m=>{c.value=!0,k({message:"按ESC键或者点击空白处结束录入",type:"info"}),E.value[m].hotKeys=[],b.value=m},D=()=>{const m=[];E.value.forEach(({hotKeys:u})=>{m.push(u)}),T(m),d.value=!1},q=()=>{z.filter=()=>!0,E.value.forEach(({hotKeys:m,action:u})=>{m.length!=0&&z(m.join("+"),S=>{S.preventDefault(),u.call(null)})})},T=m=>{localStorage.setItem("legado_web_hotkeys",JSON.stringify(m))};function Q(){try{const m=localStorage.getItem("legado_web_hotkeys");if(m===null)return!1;const u=JSON.parse(m);return!Array.isArray(u)||u.length==0?!1:(E.value.forEach((S,j)=>S.hotKeys=u[j]),!0)}catch{k({message:"快捷键配置错误",type:"error"}),localStorage.removeItem("legado_web_hotkeys")}return!1}return tt(()=>{Q()&&(d.value=!1)}),(m,u)=>{const S=ue,j=Ce,$e=ot;return g(),x(O,null,[f("div",ao,[(g(!0),x(O,null,H(i(E),R=>(g(),C(S,{size:"large",key:R.name,onClick:R.action},{default:p(()=>[y(Z(R.name),1)]),_:2},1032,["onClick"]))),128)),h(S,{size:"large",onClick:u[0]||(u[0]=()=>d.value=!0)},{default:p(()=>[...u[2]||(u[2]=[y("快捷键",-1)])]),_:1})]),h($e,{modelValue:i(d),"onUpdate:modelValue":u[1]||(u[1]=R=>M(d)?d.value=R:null),"show-close":!1,"before-close":v},{header:p(({titleClass:R,titleId:re})=>[f("div",co,[f("div",{id:re,class:xe(R)},[u[4]||(u[4]=y(" 快捷键设置 ",-1)),i(c)?(g(),x("span",po,[h(j,null,{default:p(()=>[...u[3]||(u[3]=[y(" / 录入中 ",-1)])]),_:1})])):I("",!0)],10,uo),h(S,{disabled:i(c),onClick:D,icon:i(nt)},{default:p(()=>[...u[5]||(u[5]=[y("保存",-1)])]),_:1},8,["disabled","icon"])])]),default:p(()=>[f("div",go,[(g(!0),x(O,null,H(i(E),(R,re)=>(g(),x("div",{key:R.name,class:"hotkeys-item flex-space-between"},[f("span",ho,[h(j,null,{default:p(()=>[y(Z(R.name),1)]),_:2},1024)]),f("div",So,[(g(!0),x(O,null,H(R.hotKeys,(se,Ae)=>(g(),x("div",{key:se},[f("kbd",null,Z(se),1),Ae+1<R.hotKeys.length?(g(),x("span",mo,[h(j,null,{default:p(()=>[...u[6]||(u[6]=[y("+",-1)])]),_:1})])):I("",!0)]))),128)),R.hotKeys.length==0?(g(),x("span",fo,"未设置")):I("",!0)]),h(S,{disabled:i(c),text:"",icon:i(Ee),onClick:se=>L(re)},{default:p(()=>[...u[7]||(u[7]=[y("编辑",-1)])]),_:1},8,["disabled","icon","onClick"])]))),128))])]),_:1},8,["modelValue"])],64)}}}),bo=A(yo,[["__scopeId","data-v-096adf6d"]]),_o=W({__name:"SourceTabForm",props:{config:{}},setup(e){const t=F(),n=J(()=>t.currentSource);return(r,s)=>{const o=te,l=it,a=lt,_=ct,w=at,U=st,E=rt,d=Re,c=Ie;return g(),C(c,{id:"source-edit"},{default:p(()=>[(g(!0),x(O,null,H(Object.values(e.config),({name:b,children:v})=>(g(),C(d,{label:b,key:b},{default:p(()=>[h(E,{"label-position":"right","label-width":"auto"},{default:p(()=>[(g(!0),x(O,null,H(v,({type:L,title:D,namespace:q,id:T,array:Q,hint:m,required:u=!1})=>(g(),C(U,{label:D,key:D,required:u},{default:p(()=>[L=="String"&&typeof q>"u"?(g(),C(o,{key:0,type:"textarea",modelValue:i(n)[T],"onUpdate:modelValue":S=>i(n)[T]=S,placeholder:m,autosize:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0),L=="String"&&typeof q<"u"?(g(),C(o,{key:1,type:"textarea",modelValue:i(n)[q][T],"onUpdate:modelValue":S=>i(n)[q][T]=S,placeholder:m,autosize:""},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0),L==="Boolean"?(g(),C(l,{key:2,modelValue:i(n)[T],"onUpdate:modelValue":S=>i(n)[T]=S},null,8,["modelValue","onUpdate:modelValue"])):I("",!0),L==="Number"?(g(),C(a,{key:3,modelValue:i(n)[T],"onUpdate:modelValue":S=>i(n)[T]=S,min:0},null,8,["modelValue","onUpdate:modelValue"])):I("",!0),L==="Array"?(g(),C(w,{key:4,modelValue:i(n)[T],"onUpdate:modelValue":S=>i(n)[T]=S},{default:p(()=>[(g(!0),x(O,null,H(Q,(S,j)=>(g(),C(_,{value:j,key:S,label:S},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):I("",!0)]),_:2},1032,["label","required"]))),128))]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})}}}),ko=A(_o,[["__scopeId","data-v-c07c5146"]]),vo={base:{name:"基础",children:[{title:"源类型",id:"bookSourceType",type:"Array",array:["文本","音频","图片","文件","视频"],required:!0},{title:"源域名",id:"bookSourceUrl",type:"String",hint:"通常填写网站主页,例: https://www.qidian.com",required:!0},{title:"源名称",id:"bookSourceName",type:"String",hint:"会显示在源列表",required:!0},{title:"源分组",id:"bookSourceGroup",type:"String",hint:"描述源的特征信息"},{title:"源注释",id:"bookSourceComment",type:"String",hint:"描述源作者和状态"},{title:"登录地址",id:"loginUrl",type:"String",hint:"填写网站登录网址,仅在需要登录的源有用"},{title:"登录界面",id:"loginUi",type:"String",hint:"自定义登录界面"},{title:"登录检测",id:"loginCheckJs",type:"String",hint:"登录检测js"},{title:"封面解密",id:"coverDecodeJs",type:"String",hint:"封面解密js"},{title:"链接验证",id:"bookUrlPattern",type:"String",hint:"书籍URL正则，当详情页URL与源URL的域名不一致时有效，用于添加网址"},{title:"请求头",id:"header",type:"String",hint:"客户端标识"},{title:"变量说明",id:"variableComment",type:"String",hint:"书源变量说明"},{title:"并发率",id:"concurrentRate",type:"String",hint:"并发率，如1000(访问间隔1000ms)或者1/1000(1000ms内访问1次)"},{title:"js库",id:"jsLib",type:"String",hint:"js库, 可填写js或者key-value object获取在线js文件"}]},search:{name:"搜索",children:[{title:"搜索地址",id:"searchUrl",type:"String",hint:"[域名可省略]/search.php@kw={{key}}"},{title:"校验文字",namespace:"ruleSearch",id:"checkKeyWord",type:"String",hint:"校验关键字，强烈建议填写"},{title:"列表规则",namespace:"ruleSearch",id:"bookList",type:"String",hint:"选择书籍节点 (规则结果为List<Element>)"},{title:"书名规则",namespace:"ruleSearch",id:"name",type:"String",hint:"选择节点书名 (规则结果为String)"},{title:"作者规则",namespace:"ruleSearch",id:"author",type:"String",hint:"选择节点作者 (规则结果为String)"},{title:"分类规则",namespace:"ruleSearch",id:"kind",type:"String",hint:"选择节点分类信息 (规则结果为String)"},{title:"字数规则",namespace:"ruleSearch",id:"wordCount",type:"String",hint:"选择节点字数信息 (规则结果为String)"},{title:"最新章节",namespace:"ruleSearch",id:"lastChapter",type:"String",hint:"选择节点最新章节 (规则结果为String)"},{title:"简介规则",namespace:"ruleSearch",id:"intro",type:"String",hint:"选择节点书籍简介 (规则结果为String)"},{title:"封面规则",namespace:"ruleSearch",id:"coverUrl",type:"String",hint:"选择节点书籍封面 (规则结果为String类型的url)"},{title:"详情地址",namespace:"ruleSearch",id:"bookUrl",type:"String",hint:"选择书籍详情页网址 (规则结果为String类型的url)"}]},find:{name:"发现",children:[{title:"发现地址",id:"exploreUrl",type:"String",hint:"单个发现格式<name>::<url>或者{url:<url>,title:<name>,style:...}；前者用换行符或者&&连接，后者放在数组内；可用js动态生成"},{title:"列表规则",namespace:"ruleExplore",id:"bookList",type:"String",hint:"选择书籍节点 (规则结果为List<Element>)"},{title:"书名规则",namespace:"ruleExplore",id:"name",type:"String",hint:"选择节点书名 (规则结果为String)"},{title:"作者规则",namespace:"ruleExplore",id:"author",type:"String",hint:"选择节点作者 (规则结果为String)"},{title:"分类规则",namespace:"ruleExplore",id:"kind",type:"String",hint:"选择节点分类信息 (规则结果为String)"},{title:"字数规则",namespace:"ruleExplore",id:"wordCount",type:"String",hint:"选择节点字数信息 (规则结果为String)"},{title:"最新章节",namespace:"ruleExplore",id:"lastChapter",type:"String",hint:"选择节点最新章节 (规则结果为String)"},{title:"简介规则",namespace:"ruleExplore",id:"intro",type:"String",hint:"选择节点书籍简介 (规则结果为String)"},{title:"封面规则",namespace:"ruleExplore",id:"coverUrl",type:"String",hint:"选择节点书籍封面 (规则结果为String类型的url)"},{title:"详情地址",namespace:"ruleExplore",id:"bookUrl",type:"String",hint:"选择书籍详情页网址 (规则结果为String类型的url)"}]},detail:{name:"详情",children:[{title:"预处理",namespace:"ruleBookInfo",id:"init",type:"String",hint:"用于加速详情信息检索，只支持AllInOne规则"},{title:"书名规则",namespace:"ruleBookInfo",id:"name",type:"String",hint:"选择节点书名 (规则结果为String)"},{title:"作者规则",namespace:"ruleBookInfo",id:"author",type:"String",hint:"选择节点作者 (规则结果为String)"},{title:"分类规则",namespace:"ruleBookInfo",id:"kind",type:"String",hint:"选择节点分类信息 (规则结果为String)"},{title:"字数规则",namespace:"ruleBookInfo",id:"wordCount",type:"String",hint:"选择节点字数信息 (规则结果为String)"},{title:"最新章节",namespace:"ruleBookInfo",id:"lastChapter",type:"String",hint:"选择节点最新章节 (规则结果为String)"},{title:"简介规则",namespace:"ruleBookInfo",id:"intro",type:"String",hint:"选择节点书籍简介 (规则结果为String)"},{title:"封面规则",namespace:"ruleBookInfo",id:"coverUrl",type:"String",hint:"选择节点书籍封面 (规则结果为String类型的url)"},{title:"目录地址",namespace:"ruleBookInfo",id:"tocUrl",type:"String",hint:"选择书籍详情页网址 (规则结果为String类型的url, 与详情页相同时可省略)"},{title:"修改书籍",namespace:"ruleBookInfo",id:"canReName",type:"String",hint:"允许修改书名作者(规则结果为String类型, 默认不允许)"},{title:"下载URL",namespace:"ruleBookInfo",id:"downloadUrls",type:"String",hint:"文件类书源下载地址 (规则结果为String类型的url, 多个链接返回数组)"}]},directory:{name:"目录",children:[{title:"更新前JS",namespace:"ruleToc",id:"preUpdateJs",type:"String",hint:"更新目录前调用JS 动态更新目录链接"},{title:"列表规则",namespace:"ruleToc",id:"chapterList",type:"String",hint:"选择目录列表的章节节点 (规则结果为List<Element>)"},{title:"章节名称",namespace:"ruleToc",id:"chapterName",type:"String",hint:"选择章节名称 (规则结果为String)"},{title:"章节地址",namespace:"ruleToc",id:"chapterUrl",type:"String",hint:"选择章节链接 (规则结果为String类型的Url)"},{title:"标题处理",namespace:"ruleToc",id:"formatJs",type:"String",hint:"遍历去重后的章节列表的回调，提供index(章节序号从1开始)、title(章节标题)变量，额外提供gInt(初始值0)，返回值作为新的标题"},{title:"卷名标识",namespace:"ruleToc",id:"isVolume",type:"String",hint:"章节名称是否是卷名 (规则结果为Bool)"},{title:"章节信息",namespace:"ruleToc",id:"updateTime",type:"String",hint:"选择章节信息（如更新时间） (规则结果为String)"},{title:"收费标识",namespace:"ruleToc",id:"isVip",type:"String",hint:"章节是否为VIP章节 (规则结果为Bool)"},{title:"购买标识",namespace:"ruleToc",id:"isPay",type:"String",hint:"章节是否为已购买 (规则结果为Bool)"},{title:"翻页规则",namespace:"ruleToc",id:"nextTocUrl",type:"String",hint:"选择目录下一页链接 (规则结果为List<String>或String)"}]},content:{name:"正文",children:[{title:"正文规则",namespace:"ruleContent",id:"content",type:"String",hint:"选择正文内容 (规则结果为String)"},{title:"副文规则",namespace:"ruleContent",id:"subContent",type:"String",hint:"选择副文内容 (规则结果为String)"},{title:"标题规则",namespace:"ruleContent",id:"title",type:"String",hint:"获取结果将会覆盖章节标题 (规则结果为String)"},{title:"翻页规则",namespace:"ruleContent",id:"nextContentUrl",type:"String",hint:"选择下一分页(不是下一章)链接 (规则结果为String类型的Url)"},{title:"脚本注入",namespace:"ruleContent",id:"webJs",type:"String",hint:"注入javascript，用于模拟鼠标点击等，必须有返回值，一般为String类型"},{title:"资源正则",namespace:"ruleContent",id:"sourceRegex",type:"String",hint:"匹配资源的url特征，用于嗅探"},{title:"替换规则",namespace:"ruleContent",id:"replaceRegex",type:"String",hint:"多页内容合并后替换，用于正文净化"},{title:"图片样式",namespace:"ruleContent",id:"imageStyle",type:"String",hint:"FULL:铺满 不填:默认样式"},{title:"图片解密",namespace:"ruleContent",id:"imageDecode",type:"String",hint:"填写JavaScript 返回解密图片的bytes "},{title:"购买操作",namespace:"ruleContent",id:"payAction",type:"String",hint:"填写JavaScript 返回购买链接或者调用购买接口"},{title:"回调操作",namespace:"ruleContent",id:"callBackJs",type:"String",hint:"填写JavaScript 变量event为事件对象名称"}]},other:{name:"其他",children:[{title:"启用搜索",id:"enabled",type:"Boolean"},{title:"启用发现",id:"enabledExplore",type:"Boolean"},{title:"CookieJar",id:"enabledCookieJar",type:"Boolean"},{title:"启用事件监听",id:"eventListener",type:"Boolean"},{title:"启用定制按钮",id:"customButton",type:"Boolean"},{title:"搜索权重",id:"weight",type:"Number"},{title:"排序编号",id:"customOrder",type:"Number"}]}},wo={base:{name:"基础",children:[{title:"源域名",id:"sourceUrl",type:"String",hint:"通常填写网站主页,例: https://www.qidian.com",required:!0},{title:"图标",id:"sourceIcon",type:"String",hint:"填写图片网络链接"},{title:"源名称",id:"sourceName",type:"String",hint:"会显示在源列表",required:!0},{title:"源分组",id:"sourceGroup",type:"String",hint:"描述源的特征信息"},{title:"源注释",id:"sourceComment",type:"String",hint:"描述源作者和状态"},{title:"搜索地址",id:"searchUrl",type:"String",hint:"[域名可省略]/search.php@kw={{key}}"},{title:"分类地址",id:"sortUrl",type:"String",hint:`名称1::链接1
名称2::链接2`},{title:"登录地址",id:"loginUrl",type:"String",hint:"填写网站登录网址,仅在需要登录的源有用"},{title:"登录界面",id:"loginUi",type:"String",hint:"自定义登录界面"},{title:"登录检测",id:"loginCheckJs",type:"String",hint:"登录检测js"},{title:"封面解密",id:"coverDecodeJs",type:"String",hint:"封面解密js"},{title:"请求头",id:"header",type:"String",hint:"客户端标识"},{title:"变量说明",id:"variableComment",type:"String",hint:"源变量说明"},{title:"并发率",id:"concurrentRate",type:"String",hint:"并发率"},{title:"js库",id:"jsLib",type:"String",hint:"js库, 可填写js或者key-value object获取在线js文件"}]},start:{name:"启动",children:[{title:"启动页html",id:"startHtml",type:"String",hint:"启动页html"},{title:"启动页样式",id:"startStyle",type:"String",hint:"启动页样式 填写css"},{title:"启动页Js",id:"startJs",type:"String",hint:"启动页Js"},{title:"预注入Js",id:"preloadJs",type:"String",hint:`在网页加载前就注入到网页的js代码
可注入阅读js函数到网页中
例: window.ajaxAwait = ajaxAwait;
window.java = java;`}]},list:{name:"列表",children:[{title:"列表规则",id:"ruleArticles",type:"String",hint:"规则结果为List<Element>"},{title:"翻页规则",id:"ruleNextPage",type:"String",hint:"下一页链接 规则结果为List<String>或String"},{title:"标题规则",id:"ruleTitle",type:"String",hint:"文章标题 规则结果为String"},{title:"时间规则",id:"rulePubDate",type:"String",hint:"文章发布时间 规则结果为String"},{title:"描述规则",id:"ruleDescription",type:"String",hint:"文章简要描述 规则结果为String"},{title:"图片规则",id:"ruleImage",type:"String",hint:"文章图片链接 规则结果为String"},{title:"链接规则",id:"ruleLink",type:"String",hint:"文章链接 规则结果为String"}]},webView:{name:"WebView",children:[{title:"内容规则",id:"ruleContent",type:"String",hint:"文章正文"},{title:"样式规则",id:"style",type:"String",hint:"文章正文样式 填写css"},{title:"注入规则",id:"injectJs",type:"String",hint:"注入网页的JavaScript"},{title:"黑名单",id:"contentBlacklist",type:"String",hint:"webView链接加载黑名单，英文逗号隔开"},{title:"白名单",id:"contentWhitelist",type:"String",hint:"webView链接加载白名单，英文逗号隔开"},{title:"链接拦截",id:"shouldOverrideUrlLoading",type:"String",hint:"填写js，变量url为当前资源链接，返回true拦截"}]},other:{name:"其他",children:[{title:"源类型",id:"type",type:"Array",array:["网页","图片","视频"]},{title:"列表样式",id:"articleStyle",type:"Array",array:["默认","大图","双列","瀑布","三列"]},{title:"预加载",id:"preload",type:"Boolean"},{title:"加载地址",id:"loadWithBaseUrl",type:"Boolean"},{title:"启用JS",id:"enableJs",type:"Boolean"},{title:"输出WebLog",id:"showWebLog",type:"Boolean"},{title:"优先加载缓存",id:"cacheFirst",type:"Boolean"},{title:"启用",id:"enabled",type:"Boolean"},{title:"Cookie",id:"enabledCookieJar",type:"Boolean"},{title:"单URL",id:"singleUrl",type:"Boolean"},{title:"排序编号",id:"customOrder",type:"Number"}]}},Co={class:"editor"},Uo=W({__name:"SourceEditor",setup(e){ut();let t;const n=V(/bookSource/i.test(location.href));return dt("isBookSource",n),n.value?(t=vo,document.title="书源管理"):(t=wo,document.title="订阅源管理"),(r,s)=>{const o=ko,l=bo,a=lo;return g(),x("div",Co,[h(o,{class:"left",config:i(t)},null,8,["config"]),h(l),h(a,{class:"right"})])}}}),we=A(Uo,[["__scopeId","data-v-81567bcc"]]),je=[{path:"/bookSource",name:"book-home",component:we},{path:"/rssSource",name:"rss-home",component:we}];le({history:ae(),routes:je});const Pe=le({history:ae(),routes:[Ve,je].flat()});Pe.afterEach(e=>{e.name=="shelf"&&(document.title="书架")});Be(Te).use(Oe).use(Pe).mount("#app");de(()=>Ht().isNight,e=>{e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")});window.addEventListener("vite:preloadError",e=>{e.preventDefault()});export{P as A,A as _,zt as a,bt as b,X as c,Eo as d,xo as i,$ as l,Yt as p,wt as s,Ht as u,At as v};
